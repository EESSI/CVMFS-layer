[secrets]
aws_secret_access_key = XXX
aws_access_key_id = XXX
github_pat = XXX
slack_webhook = https://hooks.slack.com/services/XXX/YYY/ZZZ

[paths]
download_dir = /where/to/store/download/tarballs
ingestion_script = /absolute/path/to/ingest-tarball.sh
metadata_file_extension = .meta.txt

[aws]
staging_bucket = eessi-staging

[cvmfs]
ingest_as_root = yes

[github]
staging_repo = EESSI/staging
failed_ingestion_issue_body = Ingestion for tarball `{tarball}` has failed.
    
    Ingestion command:
    ```
    {command}
    ```
    
    Return code:
    {return_code}
    
    Stdout:
    ```
    {stdout}
    ```
    
    Stderr:
    ```
    {stderr}
    ```
failed_tarball_overview_issue_body = An error occurred while trying to get the contents of `{tarball}`.
    
    Error message:
    ```
    {error}
    ```
pr_body = A new tarball has been staged.
    Please review the contents of this tarball carefully.
    Merging this PR will lead to automatic ingestion of the tarball.
    
    <details>
    <summary>Metadata of tarball</summary>
    
    ```
    {metadata}
    ```
    
    </details>

    <details>
    <summary>Overview of tarball contents</summary>
    
    {tar_overview}
    
    </details>

ingest_staged = |{date}|staged|tarball `{tarball}` downloaded to S0,</br>merge PR {approval_pr} for approval|
ingest_approved = |{date}|approved|:+1: tarball `{tarball}` approved, see PR {approval_pr}|
ingest_rejected = |{date}|rejected|:-1: tarball `{tarball}` rejected, see PR {approval_pr}|
ingest_done = |{date}|ingested|:tada: tarball `{tarball}` successfully ingested at `{prefix}`|

[slack]
ingestion_notification = yes
ingestion_message = Tarball `{tarball}` has been ingested into the CVMFS repository.

[logging]
level = WARN
format = %%(levelname)s:%%(message)s
# Use filename = None or remove the line for logging to stdout
filename = automated_ingestion.log
